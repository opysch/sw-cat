import { Injectable } from '@angular/core';

@Injectable({
  providedIn: 'root'
})
export class SharedService {
  public isError: boolean;
  public isLoading: boolean;
  public allCharacters: Array<any>;
  public allPlanets: Array<any>;
  public subItems: Array<string>;
  public photoImg: string;
  public profilePhoto: string;
  public sortAscIco: string;
  public sortDescIco: string;

  constructor() {
    this.isError = false;
    this.isLoading = false;
    this.allCharacters = [];
    this.allPlanets = [];
    this.subItems = ['films', 'species', 'starships', 'residents', 'vehicles'];
    this.photoImg = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAEsCAIAAABi1XKVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjJCRUEzMDZDMDNDNjExRUE4M0M0RjNBQUNFODkyRkM0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjJCRUEzMDZEMDNDNjExRUE4M0M0RjNBQUNFODkyRkM0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MkJFQTMwNkEwM0M2MTFFQTgzQzRGM0FBQ0U4OTJGQzQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MkJFQTMwNkIwM0M2MTFFQTgzQzRGM0FBQ0U4OTJGQzQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5+Jj/PAAAC9UlEQVR42uzUQQ0AAAjEMMB/cpbRAWkl7LFOUgAXjASAYQEYFmBYAIYFYFiAYQEYFoBhAYYFYFgAhgUYFoBhARgWYFgAhgVgWIBhARgWgGEBhgVgWACGBRgWgGEBGBZgWACGBRgWgGEBGBZgWACGBWBYgGEBGBaAYQGGBWBYAIYFGBaAYQEYFmBYAIYFYFiAYQEYFoBhAYYFYFgAhgUYFoBhARgWYFgAhgUYFoBhARgWYFgAhgVgWIBhARgWgGEBhgVgWACGBRgWgGEBGBZgWACGBWBYgGEBGBaAYQGGBWBYAIYFGBaAYQEYFmBYAIYFGBaAYQEYFmBYAIYFYFiAYQEYFoBhAYYFYFgAhgUYFoBhARgWYFgAhgVgWIBhARgWgGEBhgVgWACGBRgWgGEBGBZgWACGBRgWgGEBGBZgWACGBWBYgGEBGBaAYQGGBWBYAIYFGBaAYQEYFmBYAIYFYFiAYQEYFoBhAYYFYFgAhgUYFoBhARgWYFgAhgUYFoBhARgWYFgAhgVgWIBhARgWgGEBhgVgWACGBRgWgGEBGBZgWACGBWBYgGEBGBaAYQGGBWBYAIYFGBaAYQEYFmBYAIYFGBaAYQEYFmBYAIYFYFiAYQEYFoBhAYYFYFgAhgUYFoBhARgWYFgAhgVgWIBhARgWgGEBhgVgWACGBRgWgGEBGBZgWACGBRgWgGEBGBZgWACGBWBYgGEBGBaAYQGGBWBYAIYFGBaAYQEYFmBYAIYFYFiAYQEYFoBhAYYFYFgAhgUYFoBhARgWYFgAhgUYFoBhARgWYFgAhgVgWIBhARgWgGEBhgVgWACGBRgWgGEBGBZgWACGBWBYgGEBGBaAYQGGBWBYAIYFGBaAYQGGJQFgWACGBRgWgGEBGBZgWACGBWBYgGEBGBaAYQGGBWBYAIYFGBaAYQEYFmBYAIYFYFiAYQEYFoBhAYYFYFgAhgUYFoBhAYYFYFgAhgUYFoBhARgWYFgAhgVgWIBhARgWgGEBn60AAwBB0AQFGhAFQwAAAABJRU5ErkJggg==';
    this.profilePhoto = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAhIAAAFACAIAAABm8QKJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjc1QzA1QThDMDQwQjExRUFBMkZBREExRkRFQjU3Q0I4IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjc1QzA1QThEMDQwQjExRUFBMkZBREExRkRFQjU3Q0I4Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NzVDMDVBOEEwNDBCMTFFQUEyRkFEQTFGREVCNTdDQjgiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NzVDMDVBOEIwNDBCMTFFQUEyRkFEQTFGREVCNTdDQjgiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7pdtSQAAAD0klEQVR42uzVQREAAAjDMMD/3SxjYQISCf10kwwAdE4CAGwDANsAwDYAsA0AbAMA25AAANsAwDYAsA0AbAMA2wDANiQAwDYAsA0AbAMA2wDANgCwDQkAsA0AbAMA2wDANgCwDQBsQwIAbAMA2wDANgCwDQBsAwDbkAAA2wDANgCwDQBsAwDbAMA2JADANgCwDQBsAwDbAMA2ALANCQCwDQBsAwDbAMA2ALANAGxDAgBsAwDbAMA2ALANAGwDANuQAADbAMA2ALANAGwDANsAwDYkAMA2ALANAGwDANsAwDYAsA0JALANAGwDANsAwDYAsA0AbEMCAGwDANsAwDYAsA0AbAMA25AAANsAwDYAsA0AbAMA2wDANiQAwDYAsA0AbAMA2wDANgCwDQkAsA0AbAMA2wDANgCwDQBsQwIAbAMA2wDANgCwDQBsAwDbkAAA2wDANgCwDQBsAwDbAMA2JADANgCwDQBsAwDbAMA2ALANCQCwDQBsAwDbAMA2ALANAGxDAgBsAwDbAMA2ALANAGwDANuQAADbAMA2ALANAGwDANsAwDYkAMA2ALANAGwDANsAwDYAsA0JALANAGwDANsAwDYAsA0AbEMCAGwDANsAwDYAsA0AbAMA25AAANsAwDYAsA0AbAMA2wDANiQAwDYAsA0AbAMA2wDANgCwDQkAsA0AbAMA2wDANgCwDQBsQwIAbAMA2wDANgCwDQBsAwDbkAAA2wDANgCwDQBsAwDbAMA2JADANgCwDQBsAwDbAMA2ALANCQCwDQBsAwDbAMA2ALANAGxDAgBsAwDbAMA2ALANAGwDANuQAADbAMA2ALANAGwDANsAwDYkAMA2ALANAGwDANsAwDYAsA0JALANAGwDANsAwDYAsA0AbEMCAGwDANsAwDYAsA0AbAMA25AAANsAwDYAsA0AbAMA2wDANiQAwDYAsA0AbAMA2wDANgCwDQkAsA0AbAMA2wDANgCwDQBsQwIAbAMA2wDANgCwDQBsAwDbkAAA2wDANgCwDQBsAwDbAMA2JADANgCwDQBsAwDbAMA2ALANCQCwDQBsAwDbAMA2ALANAGxDAgBsAwDbAMA2ALANAGwDANuQAADbAMA2ALANAGwDANsAwDYkAMA2ALANAGwDANsAwDYAsA0JALANAGwDANsAwDYAsA0AbEMCAGwDANsAwDYAsA0AbAMA25AAANsAwDYAsA0AbAMA2wDANiQAwDYAsA0AbAMA2wDANgCwDQkAsA0AbAMA2wDANgCwDQBsQwIAbAMA2wDANgCwDQBsAwDbkACA3gswALyTBC18ZrbXAAAAAElFTkSuQmCC';
    this.sortAscIco = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB3aWR0aD0iMTc5MiIgaGVpZ2h0PSIxNzkyIiB2aWV3Qm94PSIwIDAgMTc5MiAxNzkyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik03MzYgMTQ0MHEwIDEyLTEwIDI0bC0zMTkgMzE5cS0xMCA5LTIzIDktMTIgMC0yMy05bC0zMjAtMzIwcS0xNS0xNi03LTM1IDgtMjAgMzAtMjBoMTkydi0xMzc2cTAtMTQgOS0yM3QyMy05aDE5MnExNCAwIDIzIDl0OSAyM3YxMzc2aDE5MnExNCAwIDIzIDl0OSAyM3ptMTA1NiAxMjh2MTkycTAgMTQtOSAyM3QtMjMgOWgtODMycS0xNCAwLTIzLTl0LTktMjN2LTE5MnEwLTE0IDktMjN0MjMtOWg4MzJxMTQgMCAyMyA5dDkgMjN6bS0xOTItNTEydjE5MnEwIDE0LTkgMjN0LTIzIDloLTY0MHEtMTQgMC0yMy05dC05LTIzdi0xOTJxMC0xNCA5LTIzdDIzLTloNjQwcTE0IDAgMjMgOXQ5IDIzem0tMTkyLTUxMnYxOTJxMCAxNC05IDIzdC0yMyA5aC00NDhxLTE0IDAtMjMtOXQtOS0yM3YtMTkycTAtMTQgOS0yM3QyMy05aDQ0OHExNCAwIDIzIDl0OSAyM3ptLTE5Mi01MTJ2MTkycTAgMTQtOSAyM3QtMjMgOWgtMjU2cS0xNCAwLTIzLTl0LTktMjN2LTE5MnEwLTE0IDktMjN0MjMtOWgyNTZxMTQgMCAyMyA5dDkgMjN6Ii8+PC9zdmc+';
    this.sortDescIco = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB3aWR0aD0iMTc5MiIgaGVpZ2h0PSIxNzkyIiB2aWV3Qm94PSIwIDAgMTc5MiAxNzkyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0xMjE2IDE1Njh2MTkycTAgMTQtOSAyM3QtMjMgOWgtMjU2cS0xNCAwLTIzLTl0LTktMjN2LTE5MnEwLTE0IDktMjN0MjMtOWgyNTZxMTQgMCAyMyA5dDkgMjN6bS00ODAtMTI4cTAgMTItMTAgMjRsLTMxOSAzMTlxLTEwIDktMjMgOS0xMiAwLTIzLTlsLTMyMC0zMjBxLTE1LTE2LTctMzUgOC0yMCAzMC0yMGgxOTJ2LTEzNzZxMC0xNCA5LTIzdDIzLTloMTkycTE0IDAgMjMgOXQ5IDIzdjEzNzZoMTkycTE0IDAgMjMgOXQ5IDIzem02NzItMzg0djE5MnEwIDE0LTkgMjN0LTIzIDloLTQ0OHEtMTQgMC0yMy05dC05LTIzdi0xOTJxMC0xNCA5LTIzdDIzLTloNDQ4cTE0IDAgMjMgOXQ5IDIzem0xOTItNTEydjE5MnEwIDE0LTkgMjN0LTIzIDloLTY0MHEtMTQgMC0yMy05dC05LTIzdi0xOTJxMC0xNCA5LTIzdDIzLTloNjQwcTE0IDAgMjMgOXQ5IDIzem0xOTItNTEydjE5MnEwIDE0LTkgMjN0LTIzIDloLTgzMnEtMTQgMC0yMy05dC05LTIzdi0xOTJxMC0xNCA5LTIzdDIzLTloODMycTE0IDAgMjMgOXQ5IDIzeiIvPjwvc3ZnPg==';
  }

  static getIdFromURL(url: string): number {
    let userId: number;
    const urlArr: Array<string> = url.split(/[/]+/);
    userId = +urlArr[urlArr.length - 1] > 0
      ? +urlArr[urlArr.length - 1]
      : +urlArr[urlArr.length - 2];

    return userId;
  }

  parseItems(items: Array<any>) {
    for (let i = 0; i < items.length; i++) {
      delete items[i]['created'];
      delete items[i]['edited'];
      items[i]['height'] = !isNaN(+items[i]['height']) ? +items[i]['height'] : 0;
      items[i]['mass'] = !isNaN(+items[i]['mass']) ? +items[i]['mass'] : 0;
      if (items[i]['url']) {
        items[i]['url'] = SharedService.getIdFromURL(items[i]['url']);
      }
      if (items[i]['homeworld']) {
        items[i]['homeworld'] = SharedService.getIdFromURL(items[i]['homeworld']);
      }

      for (let k = 0; k < this.subItems.length; k++) {
        if (items[i][this.subItems[k]] && items[i][this.subItems[k]].length) {
          if (items[i][this.subItems[k]] && items[i][this.subItems[k]].length) {
            for (let j = 0; j < items[i][this.subItems[k]].length; j++) {
              items[i][this.subItems[k]][j] = SharedService.getIdFromURL(items[i][this.subItems[k]][j]);
            }
          }
        }
      }
    }
    return items;
  }
}
